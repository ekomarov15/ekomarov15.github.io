<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Экзамен</title>
<link rel="stylesheet" href="css/modern.css">
</head>
<body>

<header><h1>Экзамен</h1></header>
<div class="container card">
  <div id="task-container"></div>
  <textarea id="answer"></textarea>
  <button onclick="nextTask()">Далее</button>
</div>

<script>
const exam = localStorage.getItem("exam");
const structure = exam === "oge" ? OGE_STRUCTURE : EGE_STRUCTURE;
const bank      = exam === "oge" ? OGE_BANK : EGE_BANK;
let variant     = JSON.parse(localStorage.getItem("variant")) || [];

let index = 0;
let answers = {};

function renderTask() {
  if (index >= variant.length) {
    localStorage.setItem("answers", JSON.stringify(answers));
    location.href = "result.html";
    return;
  }

  let num = variant[index];
  const t = bank[num] && bank[num][0];

  document.getElementById("task-container").innerHTML = `
    <h3>Задание ${num}. ${structure[num].name}</h3>
    <p>${t ? t.text : ""}</p>
  `;
}

function nextTask() {
  answers[variant[index]] = document.getElementById("answer").value;
  index++;
  document.getElementById("answer").value = "";
  renderTask();
}

renderTask();
</script>

</body>
</html>
