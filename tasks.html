<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Список заданий</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <h1>Список заданий</h1>
</header>

<div class="container card">
  <h2>Выберите задания для варианта</h2>

  <div id="tasks-list"></div>

  <button onclick="saveManualVariant()">Собрать вариант</button>
  <button onclick="autoVariant()">Случайный вариант</button>
</div>

<script src="js/data/oge-structure.js"></script>
<script src="js/data/oge-bank.js"></script>
<script src="js/data/ege-structure.js"></script>
<script src="js/data/ege-bank.js"></script>

<script>
const exam = localStorage.getItem("exam");
const struct = exam === "oge" ? OGE_STRUCTURE : EGE_STRUCTURE;
const bank  = exam === "oge" ? OGE_BANK : EGE_BANK;
const container = document.getElementById("tasks-list");

// Вывод списка
for (let num in struct) {
  container.innerHTML += `
    <div class="task-row">
      <label>
        <input type="checkbox" id="task-${num}" />
        Задание ${num}: ${struct[num].name}
      </label>
    </div>`;
}

// Сохранение вручную
function saveManualVariant() {
  let chosen = [];
  for (let num in struct) {
    if (document.getElementById(`task-${num}`).checked) {
      chosen.push(num);
    }
  }
  localStorage.setItem("variant", JSON.stringify(chosen));
  location.href = "exam.html";
}

// Генерация случайного
function autoVariant() {
  const keys = Object.keys(struct);
  const random = keys.sort(() => Math.random() - 0.5);
  localStorage.setItem("variant", JSON.stringify(random));
  location.href = "exam.html";
}
</script>

</body>
</html>
